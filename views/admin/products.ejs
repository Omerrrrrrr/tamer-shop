<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <title>√úr√ºnler | Admin</title>
    <link rel="stylesheet" href="/css/styles.css" />
  </head>
  <body class="bg-slate-50 text-slate-900">
    <%- include('../partials/header') %>

    <main class="max-w-6xl mx-auto px-4 py-10">
      <div class="flex items-center justify-between mb-6">
        <div>
          <p class="soft-badge">Admin</p>
          <h1 class="text-2xl font-semibold mt-2">√úr√ºnler</h1>
          <p class="text-sm text-slate-500 mt-1">
            Eklenen √ºr√ºnleri g√∂r√ºnt√ºleyebilir, yeni √ºr√ºn ekleyebilir veya silebilirsin.
          </p>
        </div>
        <div class="flex gap-2">
          <a
            href="/admin/categories"
            class="btn-secondary">
            Kategoriler
          </a>
          <a
            href="/admin/products/new"
            class="btn-primary">
            + Yeni √úr√ºn
          </a>
        </div>
      </div>

      <% if (products.length === 0) { %>
        <div class="card glass text-sm text-slate-500">
          Hen√ºz √ºr√ºn eklenmemi≈ü. Saƒü √ºstten "Yeni √úr√ºn" ekleyebilirsin.
        </div>
      <% } else { %>
        <div class="card glass overflow-x-auto">
          <table class="min-w-full text-sm">
            <thead>
              <tr class="text-left text-xs text-slate-500 uppercase">
                <th class="py-2 pr-4">G√∂rsel</th>
                <th class="py-2 pr-4">√úr√ºn</th>
                <th class="py-2 pr-4">Kategori</th>
                <th class="py-2 pr-4">Stok</th>
                <th class="py-2 pr-4">Fiyat</th>
                <th class="py-2 pr-4">ƒ∞ndirim</th>
                <th class="py-2 pr-4 text-right">ƒ∞≈ülemler</th>
              </tr>
            </thead>
            <tbody>
              <% products.forEach(product => { %>
                <tr class="border-t border-slate-100">
                  <td class="py-2 pr-4 align-middle">
                    <% if (product.image_url) { %>
                      <div class="w-10 h-10 rounded-lg overflow-hidden bg-slate-100">
                        <img
                          src="<%= product.image_url %>"
                          alt="<%= product.name %>"
                          class="w-full h-full object-cover" />
                      </div>
                    <% } else { %>
                      <div class="w-10 h-10 rounded-lg bg-slate-100 flex items-center justify-center text-xl">
                        üì¶
                      </div>
                    <% } %>
                  </td>
                  <td class="py-2 pr-4 align-middle">
                    <p class="font-semibold text-slate-900"><%= product.name %></p>
                    <p class="text-xs text-slate-500 line-clamp-1">
                      <%= product.description %>
                    </p>
                  </td>
                  <td class="py-2 pr-4 align-middle text-xs text-slate-500">
                    <%= product.category %>
                  </td>
                  <td class="py-2 pr-4 align-middle text-xs text-slate-500">
                    <%= product.stock %>
                  </td>
                  <td class="py-2 pr-4 align-middle text-xs text-slate-900 font-semibold">
                    ‚Ç∫<%= Number(product.price || 0).toFixed(2) %>
                  </td>
                  <td class="py-2 pr-4 align-middle text-xs">
                    <% if ((product.discount_percent || 0) > 0) { %>
                      <span class="inline-flex items-center px-2 py-1 rounded-full bg-emerald-50 text-emerald-700 font-semibold">
                        -<%= product.discount_percent %>%
                      </span>
                    <% } else { %>
                      <span class="text-slate-400">-</span>
                    <% } %>
                  </td>
                  <td class="py-2 pr-4 align-middle text-right space-x-3">
                    <a
                      href="/products/<%= product.id %>"
                      class="text-xs text-slate-500 hover:underline"
                      target="_blank">
                      G√∂r√ºnt√ºle
                    </a>
                    <a
                      href="/admin/products/edit/<%= product.id %>"
                      class="text-xs text-blue-600 hover:underline">
                      D√ºzenle
                    </a>
                    <a
                      href="/admin/products/delete/<%= product.id %>"
                      class="text-xs text-rose-600 hover:underline"
                      onclick="return confirm('Bu √ºr√ºn√º silmek istediƒüine emin misin?');">
                      Sil
                    </a>

                  </td>
                </tr>
              <% }) %>
            </tbody>
          </table>
        </div>
      <% } %>
    </main>
    <%- include('../partials/footer') %>
  </body>
</html>
